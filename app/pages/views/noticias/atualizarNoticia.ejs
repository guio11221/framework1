<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width-device-width,initial-scale-1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css" />
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://unpkg.com/bootstrap-table@1.21.2/dist/bootstrap-table.min.css" rel="stylesheet"/>
    <link rel="icon" type="image/x-icon" href="../assets/img/favicon/favicon.ico" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="../assets/vendor/fonts/boxicons.css" />
    <link rel="stylesheet" href="../assets/vendor/css/core.css" class="template-customizer-core-css" />
    <link rel="stylesheet" href="../assets/vendor/css/theme-default.css" class="template-customizer-theme-css" />
    <link rel="stylesheet" href="../assets/css/demo.css" />
    <link rel="stylesheet" href="../assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css" />
      <link rel="stylesheet" href="../assets/vendor/libs/apex-charts/apex-charts.css" />
      <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
      <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
     <title>Portal de notícias</title>
  </head>
  <body style="background-color: black;">
    <%- include ('../menu/nav.ejs') %>
  
    <div class="content-wrapper">
      <div class="layout-wrapper layout-content-navbar">
          <div class="layout-container">
              <div class="content-wrapper">
                  <div class="container-xxl flex-grow-1 container-p-y">
                      <div class="row"> 
                          <div class="container-xxl flex-grow-1 container-p-y">
                            <div class="row">
                              <div class="col-md-12">
                                <div class="tab-content">
                                  <div class="tab-pane fade show active profile-overview" id="profile-overview">
                                    <button onclick="window.location.href='/noticia/?id=<%= noticias[0].id_noticia %>'"  class="btn btn-outline-success">Voltar</button>
                                    <br><br>
                                <form class="needs-validation" action="/atualizarNoticia" method="post" novalidate>
                                        <div class="card mb-4">
                                         <div class="card-body">


                                    
                                          
                                             <input type="hidden" name="id" value="<%= noticias[0].id_noticia%>">
                                              <input class="form-control" name="titulo" value=" <%= noticias[0].titulo %>" placeholder="Por o titulo da notícia...!!" required> 
                                              <br>
                                             <!-- Adicionar um elemento para o editor -->
                                            <div id="editor"><%= noticias[0].noticia %></div>
                                                                                    
                                            <!-- Adicionar um textarea com o mesmo id para receber o valor do editor -->
                                            <textarea class="form-control" style="display: none;" id="noticia" name="noticia" rows="20" cols="50" required><%= noticias[0].noticia %></textarea>

                                                                                    
                                            <script>
                                              // Selecionar o elemento do textarea
                                              var editor= document.getElementById('editor');
                                              var noticia = document.getElementById('noticia')
                                            
                                              // Inicializar o Quill
                                              var quill = new Quill(editor, {

                                                modules: {
                                                  toolbar: [
                                                    ['bold', 'italic', 'underline', 'strike'],    // Adicionar botões para negrito, itálico, sublinhado e tachado
                                                    ['blockquote', 'code-block'],                 // Adicionar botões para citação e código
                                                    [{ 'header': 1 }, { 'header': 2 }],            // Adicionar botões para títulos
                                                    [{ 'list': 'ordered' }, { 'list': 'bullet' }], // Adicionar botões para listas ordenadas e não ordenadas
                                                    [{ 'script': 'sub' }, { 'script': 'super' }],  // Adicionar botões para subscrito e sobrescrito
                                                    [{ 'indent': '-1' }, { 'indent': '+1' }],      // Adicionar botões para recuar e avançar
                                                    [{ 'direction': 'rtl' }],                     // Adicionar botão para alinhar à direita
                                                    [{ 'size': ['small', false, 'large', 'huge'] }],// Adicionar botões para tamanho da fonte
                                                    [{ 'header': [1, 2, 3, 4, 5, 6, false] }],      // Adicionar botões para tamanho do cabeçalho
                                                    [{ 'color': [] }, { 'background': [] }],       // Adicionar botões para cor do texto e de fundo
                                                    [{ 'font': [] }],                              // Adicionar botões para seleção de fonte
                                                    [{ 'align': [] }],                             // Adicionar botões para alinhamento
                                                    ['clean'],                                     // Adicionar botão para limpar formatação
                                                  ]
                                                },
                                                placeholder: 'Escreva aqui sua notícia...',
                                                theme: 'snow'
                                              });
                                            
                                              // Atualizar o valor do textarea com o conteúdo do editor
                                              quill.on('text-change', function() {
                                                noticia.value = quill.root.innerHTML;
                                              });
                                            </script>
                                            
                                          

                                         <br>
                                         <button type="submit" class="btn btn-primary" style="float: right;">Salvar</button>
                                         
                                        </div>
                                        
                                    </div>
                                </form>

                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>

                      </div>
                  </div>
              </div>
          </div>
      </div>
  </div>



  
<script>
    var forms = document.getElementsByClassName('needs-validation');
var validation = Array.prototype.filter.call(forms, function (form) {
  form.addEventListener('submit', function (event) {
    if (form.checkValidity() === false) {
      event.preventDefault();
      event.stopPropagation();

      Swal.fire({
        icon: 'error',
        title: 'Falha ao enviar',
        text: 'Algum campo do formulario esta incompleto...!!',
        confirmButtonText: 'OK'
      });

    } else {
      event.preventDefault();
      Swal.fire({
        icon: 'success',
        title: 'Validação bem sucedida!',
        text: 'Seus dados foram enviados com sucesso.',
        confirmButtonText: 'OK'
      });
      form.submit(); // aqui estava forms.submit(), deve ser form.submit()
    }
    form.classList.add('was-validated');
  }, false);
});

</script>
  <script src="../assets/vendor/libs/jquery/jquery.js"></script>
  <script src="../assets/vendor/libs/popper/popper.js"></script>
  <script src="../assets/vendor/js/bootstrap.js"></script>
  <script src="../assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>
  <script src="../assets/vendor/js/menu.js"></script>
  <script src="../noticia/index.js"></script>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.2/dist/sweetalert2.all.min.js"></script>
  <script src="https://unpkg.com/bootstrap-table@1.21.2/dist/bootstrap-table.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous" ></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
  </body>
</html>
